<!DOCTYPE html>
<html>
<head>
<meta charset="UTF-8">
<link href="https://fonts.googleapis.com/css?family=VT323" rel="stylesheet">
<link rel="stylesheet" type"text/css" href="home.css">
<script type="text/javascript" src="paper-full.js"></script>
<script type="text/javascript" src="orangeLogo.js"></script>
<script>
	window.onload = function(){
		//Handle the sections.
		disableAllSections();
		showWritingSection();

		//Load the logo.
		var canvas = document.getElementById('logoCanvas');
		paper.setup(canvas);
		var theLogo = new orangeLogo();
		theLogo.theMaze = new maze(new paper.Point(220,52));

		theLogo.NodeText = new paper.PointText(new paper.Point(0,80));
		theLogo.NodeText.fillColor = theLogo.Color;
		theLogo.NodeText.fontFamily = 'VT323';
		theLogo.NodeText.fontSize = theLogo.typeSize;
		theLogo.NodeText.shadowColor = theLogo.Color;
		theLogo.NodeText.shadowBlur = theLogo.blurVal;
		theLogo.NodeText.content = 'NODE';
		theLogo.OrangeText = new paper.PointText(new paper.Point(260,80));
		theLogo.OrangeText.fillColor = theLogo.Color;
		theLogo.OrangeText.fontFamily = 'VT323';
		theLogo.OrangeText.fontSize = theLogo.typeSize;
		theLogo.OrangeText.shadowColor = theLogo.Color;
		theLogo.OrangeText.shadowBlur = theLogo.blurVal;
		theLogo.OrangeText.content = 'RANGE';

		theLogo.theMaze.generateMaze();
		theLogo.theMaze.drawMaze();
		paper.view.onFrame = function(event){
			theLogo.theMaze.rotateMaze();
		}

		var tool = new paper.Tool();
		//Generate a new maze on click.
		tool.onMouseDown = function(event){
			theLogo.theMaze.generateMaze();
			theLogo.theMaze.drawMaze();
		}
	}

	function disableAllSections(){
		document.getElementById("softwareWrapper").style.display = "none";
		document.getElementById("writingWrapper").style.display = "none";
		document.getElementById("aboutWrapper").style.display = "none";
		document.getElementById("softwareText").style.color = "";
		document.getElementById("softwareText").style.textShadow = "";
		document.getElementById("writingText").style.color = "";
		document.getElementById("writingText").style.textShadow = "";
		document.getElementById("aboutText").style.color = "";
		document.getElementById("aboutText").style.textShadow = "";
	}
	function showSoftwareSection(){
		disableAllSections();
		document.getElementById("softwareWrapper").style.display = "block";
		document.getElementById("softwareText").style.color = "white";
		document.getElementById("softwareText").style.textShadow = "0px 0px 5px white";
	}
	function showWritingSection(){
		disableAllSections();
		document.getElementById("writingWrapper").style.display = "block";
		document.getElementById("writingText").style.color = "white";
		document.getElementById("writingText").style.textShadow = "0px 0px 5px white";
	}
	function showAboutSection(){
		disableAllSections();
		document.getElementById("aboutWrapper").style.display = "block";
		document.getElementById("aboutText").style.color = "white";
		document.getElementById("aboutText").style.textShadow = "0px 0px 5px white";
	}
</script>
<script>
  (function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){
  (i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),
  m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)
  })(window,document,'script','https://www.google-analytics.com/analytics.js','ga');

  ga('create', 'UA-96847192-1', 'auto');
  ga('send', 'pageview');

</script>
<title>Node Orange</title>
</head>

<div id="logoDiv">
	<canvas id="logoCanvas" width="460" height="100" keepalive="false"></canvas>
</div>
<div id="masterWrapper">
	<div id="menuBar">

			<a onClick="showWritingSection();" style="cursor: pointer; cursor: hand;"><p id="writingText">WRITING</p> </a>


			<a onClick="showSoftwareSection();" style="cursor: pointer; cursor: hand;"><p id="softwareText">PROJECTS</p> </a>


			<a onClick="showAboutSection();" style="cursor: pointer; cursor: hand;"><p id="aboutText">ABOUT</p> </a>

	</div>
	<hr id="menuLine"></hr>
	<div id = "softwareWrapper">
		<div id = "softImg">
			<div id = "phantomSelector">
				<a href="http://www.nodeOrange.com/phantomnode"><img id="phantomImg" src="PhantomSplash.png"></a>
			</div>
			<a href="http://www.nodeOrange.com/phantomnode" id = "phantomInfo">
				Phantom Node
				<p id = "phantomDescText">Hack your way through procedurally generated mazes to find the truth. Featuring music by Nowtro and Droid Bishop.</p>
			</a>
		</div>
		<div id = "softImg">
			<div id = "stellarSelector">
				<a href="http://www.nodeOrange.com/stellarplot/"><img id="stellarImg" src="Plotimg.png"></a>
			</div>
			<a href = "http://www.nodeOrange.com/stellarplot" id = "stellarInfo">
				Stellar Plotter
				<p id = "stellarDescText">Visualize the evolution of stars across an H-R diagram, from protostar phase to red giant.</p>
			</a>
		</div>
	</div>
	<div id = "writingWrapper">
		<div id="substack-feed" style="max-width:700px;margin:auto;"></div>
		<script>
		(async () => {
		  const feedDiv = document.getElementById('substack-feed');
		  feedDiv.innerHTML = '<p style="color:orange;font-family:VT323;font-size:25px">Loading…</p>';
		  try {
		    const rss = encodeURIComponent('https://efithorsjetsampatch.substack.com/feed');
		    const data = await fetch(`https://api.rss2json.com/v1/api.json?rss_url=${rss}`).then(r => r.json());
		    feedDiv.innerHTML = '';
		    data.items.slice(0,5).forEach((item,idx,arr) => {
		      const imgUrl = item.thumbnail || (item.enclosure ? item.enclosure.link : '');
		      const card = document.createElement('div');
		      card.className = 'postCard';

		      // clickable image
		      if (imgUrl) {
		        const imgLink = document.createElement('a');
		        imgLink.href = item.link;
		        imgLink.target = '_blank';
		        const img = document.createElement('img');
		        img.src = imgUrl;
		        imgLink.appendChild(img);
		        card.appendChild(imgLink);
		      }

		      const title = document.createElement('a');
		      title.href = item.link;
		      title.target = '_blank';
		      title.textContent = item.title;
		      card.appendChild(title);

		      const excerpt = document.createElement('p');
		      const tempDiv = document.createElement('div');
		      tempDiv.innerHTML = item.description;
		      const plainText = tempDiv.textContent || tempDiv.innerText || '';
		      excerpt.textContent = plainText.slice(0,120)+'…';
		      card.appendChild(excerpt);

		      feedDiv.appendChild(card);

		      // separator except after last card
		      if (idx < arr.length-1) {
		        const sep = document.createElement('hr');
		        sep.className = 'feedSeparator';
		        feedDiv.appendChild(sep);
		      }
		    });

		    // Archive button
		    const archiveBtn = document.createElement('a');
		    archiveBtn.href = 'https://efithorsjetsampatch.substack.com/archive';
		    archiveBtn.target = '_blank';
		    archiveBtn.className = 'archiveButton';
		    archiveBtn.textContent = 'View Full Archive →';
		    feedDiv.appendChild(archiveBtn);
		  } catch(err) {
		    console.error('Failed to load Substack feed', err);
		    feedDiv.innerHTML = '<p style="color:red">Unable to load feed.</p>';
		  }
		})();
		</script>
	</div>
	<div id = "aboutWrapper">
		<div id = 'contactBox'>	
			<p id = 'personalBlurb'>Email: <a href="mailto:efithor@gmail.com">Efithor@gmail.com</a></p>
		</div>
	</div>
</div>
